<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Frijole&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>
<body>

 <!-- navbar -->
 <nav class="nav-wraper black" class="">
    <div class="container">
      <a href="#" class="brand-logo orange-text">Site Title</a>
      <a href="#" class="sidenav-trigger" data-target="mobile-links">
        <i class="material-icons orange-text">menu</i>
      </a>
      <!-- when we get to smaller screens the options wont show -->
      <ul class="right hide-on-med-and-down">
        <li><a href="index.html" class="orange-text">Main</a></li>
        <li><a href="calendar.html" class="orange-text">Calendar</a></li>
        <li><a href="response.html" class="orange-text">Response</a></li>
      </ul>
    </div>


  </nav>
  <ul class="sidenav orange-text" id="mobile-links">
    <li><a href="index.html" class="orange-text">Main</a></li>
    <li><a href="calendar.html" class="orange-text">Calendar</a></li>
    <li><a href="response.html" class="orange-text">Response</a></li>
  </ul>
  <!-- navbar -->
<div class="container">
    <h1 class="text-center">Halloween Movie Reviews</h1>
    Pick Your NYT Review
    <select name="nytMovies" id="movieOptions"></select>
    <div id="article-view"></div>
</div>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
var halloweenMovies = [
            {
                title: "Black Box",
                id: 716258
            },
            {
                title: "Possessor",
                id: 435615
            },
            {
                title: "Prevenge",
                id: 395982
            },
            {
                title: "Alive",
                id: 492414
            },
            {
                title: "Relic",
                id: 539181
            },
            {
                title: "The Invisible Man",
                id: 570670
            },
            {
                title: "Color Out of Space",
                id: 522565
            },
            {
                title: "In Fabric",
                id: 475220
            },
            {
                title: "Us",
                id: 458723
            },
            {
                title: "Bird Box",
                id: 405774
            },
            {
                title: "Halloween",
                id: 948
            },
            {
                title: "A Quiet Place",
                id: 447332
            },
            {
                title: "I Remember You",
                id: 423236
            },
            {
                title: "It Comes at Night",
                id: 418078
            },
            {
                title: "Scream 4",
                id: 41446
            },
            {
                title: "Signs",
                id: 2675
            },
            {
                title: "The Shining",
                id: 694
            },
            {
                title: "Psycho",
                id: 539
            },
            {
                title: "Doctor Sleep",
                id: 501170
            },
            {
                title: "The Grudge",
                id: 465086
            },
            {
                title: "The Addams Family (2019)",
                id: 481084
            },
            {
                title: "Hereditary",
                id: 493922
            },
            {
                title: "Get Out",
                id: 419430
            },
            {
                title: "A Nightmare On Elm Street",
                id: 23437
            },
            {
                title: "The Texas Chainsaw Massacre",
                id: 10781
            },
            {
                title: "Drag Me to Hell",
                id: 16871
            },
            {
                title: "Orphan",
                id: 21208
            },
            {
                title: "It Chapter Two",
                id: 474350
            },
            {
                title: "The Wretched",
                id: 605804
            },
            {
                title: "Books of Blood",
                id: 715123
            },      
            {
                title: "The Nun",
                id: 439079
            },
]

$(document).ready(function () {
       
        for (var i =0; i< halloweenMovies.length; i++) {
            $("#movieOptions").append(
                `<option value="${halloweenMovies[i].id}">${halloweenMovies[i].title}</option>`
            )
        }
        $("#movieOptions").on("change", function(event) {
            
            var moviedbTitle = $("#movieOptions option:selected").text().trim();
            console.log(moviedbTitle);


var nytURL = "https://api.nytimes.com/svc/movies/v2/reviews/search.json?query=" + moviedbTitle + "&api-key=bFTiVIHnCvfTfqcozyNdlYBGsf2Q5AkL"

$.ajax({
url: nytURL,
method: "GET"
}).then(function(response) {
    var link = $("<a>");
        var articleReview = response.results[0].link.url
        console.log(response.results[0].link.url)
        link.attr("href", articleReview)
            link.text(articleReview);
            $("#article-view").append((link));
            

    });
    var empty = $("#article-view").empty();
    $("#movieOptions").on("change", empty)
          

          console.log(empty)

        });




   

//     $("#find-movie").on("click", function(event) {
// event.preventDefault();
// // var katiesKey = "&api-key=PDQfqUCo4TPMbISMH5xgByGfPz9oraG7"
// // var movie = $("#movie-input").val().trim();
// var nytURL = "https://api.nytimes.com/svc/movies/v2/reviews/search.json?query=" + movie + "&api-key=bFTiVIHnCvfTfqcozyNdlYBGsf2Q5AkL"


// //katie's api code: PDQfqUCo4TPMbISMH5xgByGfPz9oraG7"

// $.ajax({
// url: nytURL,
// method: "GET"
// }).then(function(response) {


// console.log(response);
// // // console.log(response.results[2].summary_short)

// // var link = $("<a>");
// //         var articleReview = response.results[6].link.url
// //         link.attr("href", articleReview)
// //             link.text(articleReview);
// //             $("#movies-view").prepend((link));

// }); 
// }); 
   

$('select').formSelect();

});

   
</script>

  
</body>
</html>